{% extends '::base.html.twig' %}

{% block body %}

    {{ form_start(form) }}

    <div class="panel panel-default">
        <div class="panel-body">
            <button type="submit" class="btn btn-success form-control">Importuj</button>
        </div>
    </div>

    <div class="table-responsive">
        <table class="table table-bordered">
            {% set date = null %}
            {% for operation in importer.operations %}

                {% if loop.first or date != operation.date %}
                    {% set date = operation.date %}
                    <tr class="active">
                        <th colspan="3">{{ operation.date | date('d.m.Y') }}</th>
                    </tr>
                {% elseif date is null %}
                    <tr class="active">
                        <th colspan="3">{{ 'import.date.abnormal' | trans }}</th>
                    </tr>
                {% endif %}
                <tr class="
                    {% if operation.status == constant('AppBundle\\Entity\\Operation::STATUS_CORRECT') %}success
                    {% elseif operation.status == constant('AppBundle\\Entity\\Operation::STATUS_DUPLICATED') %}warning
                    {% elseif operation.status == constant('AppBundle\\Entity\\Operation::STATUS_INVALID') %}danger
                    {% endif %}
                ">
                    <td>{{ operation.contact.name }}</td>
                    <td>{{ operation.name }}</td>
                    <td class="text-right">{{ operation.amount | number_format(2, '.', ',') }} z≈Ç</td>
                </tr>

            {% endfor %}
        </table>
    </div>

    <div class="panel panel-default">
        <div class="panel-body">
            <button type="submit" class="btn btn-success form-control">Importuj</button>
        </div>
    </div>

    {{ form_end(form) }}

{% endblock %}

