{% extends 'base.html.twig' %}

{% block body %}

    <div class="row">

        <div class="col-md-3">

            <div class="panel panel-success">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <i class="glyphicon glyphicon-chevron-down"></i>
                        {{ 'statistic.min' | trans }}
                    </h3>
                </div>
                <div class="panel-body text-center">
                    {{ statistics.min | number_format(2, ',', ' ') }} zł
                </div>
            </div>

        </div>

        <div class="col-md-3">

            <div class="panel panel-danger">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <i class="glyphicon glyphicon-chevron-up"></i>
                        {{ 'statistic.max' | trans }}
                    </h3>
                </div>
                <div class="panel-body text-center">
                    {{ statistics.max | number_format(2, ',', ' ') }} zł
                </div>
            </div>

        </div>

        <div class="col-md-3">

            <div class="panel panel-warning">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <i class="glyphicon glyphicon-random"></i>
                        {{ 'statistic.avg' | trans }}
                    </h3>
                </div>
                <div class="panel-body text-center">
                    {{ statistics.avg | number_format(2, ',', ' ') }} zł
                </div>
            </div>

        </div>

        <div class="col-md-3">

            <div class="panel panel-info">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <i class="glyphicon glyphicon-retweet"></i>
                        {{ 'statistic.sum' | trans }}
                    </h3>
                </div>
                <div class="panel-body text-center">
                    {{ statistics.sum | number_format(2, ',', ' ') }} zł
                </div>
            </div>

        </div>

    </div>

    <div class="table-responsive">
        <table class="table table-bordered">
            <thead>
                <tr class="active">
                    <th>{{ 'model._common.date' | trans }}</th>
                    <th>{{ 'model.operation._title' | trans }}</th>
                    <th>{{ 'model.contact._title' | trans }}</th>
                    <th>{{ 'model.operation.amount' | trans }}</th>
                </tr>
            </thead>
            <tbody>
            {% set date = null %}
            {% for operation in operations %}
                <tr>
                    <td>{{ operation.date | date('Y-m-d') }}</td>
                    <td><a href="{{ path('operation_edit', {'operation': operation.id }) }}" class="center-block">{{ operation.name }}</a></td>
                    <td><a href="{{ path('operation_index', {contact: operation.contact.id}) }}">{{ operation.contact.name }}</a></td>
                    <td class="text-right">{{ operation.amount | number_format(2, '.', ',') }} zł</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>

    </div>

{% endblock %}

{% block javascripts %}

    <script>

        $(document).ready( function () {
            $('.table').DataTable({
                language: {
                    url: "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Polish.json"
                },
                rowGroup: {
                    dataSrc: 0
                }
            });
        });

    </script>

{% endblock %}
